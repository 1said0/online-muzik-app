{"remainingRequest":"/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/babel-loader/lib/index.js!/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/enes/Desktop/music-14-22-COMPLETED/src/components/CompositionItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/enes/Desktop/music-14-22-COMPLETED/src/components/CompositionItem.vue","mtime":1613498004000},{"path":"/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/cache-loader/dist/cjs.js","mtime":1708974782339},{"path":"/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/babel-loader/lib/index.js","mtime":1708974782321},{"path":"/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/cache-loader/dist/cjs.js","mtime":1708974782339},{"path":"/Users/enes/Desktop/music-14-22-COMPLETED/node_modules/vue-loader-v16/dist/index.js","mtime":1708974832958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2VuZXMvRGVza3RvcC9tdXNpYy0xNC0yMi1DT01QTEVURUQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBzb25nc0NvbGxlY3Rpb24sIHN0b3JhZ2UgfSBmcm9tICdAL2luY2x1ZGVzL2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21wb3NpdGlvbkl0ZW0nLAogIHByb3BzOiB7CiAgICBzb25nOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB1cGRhdGVTb25nOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGluZGV4OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICByZW1vdmVTb25nOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHVwZGF0ZVVuc2F2ZWRGbGFnOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0Zvcm06IGZhbHNlLAogICAgICBzY2hlbWE6IHsKICAgICAgICBtb2RpZmllZF9uYW1lOiAncmVxdWlyZWQnLAogICAgICAgIGdlbnJlOiAnYWxwaGFfc3BhY2VzJwogICAgICB9LAogICAgICBpbl9zdWJtaXNzaW9uOiBmYWxzZSwKICAgICAgc2hvd19hbGVydDogZmFsc2UsCiAgICAgIGFsZXJ0X3ZhcmlhbnQ6ICdiZy1ibHVlLTUwMCcsCiAgICAgIGFsZXJ0X21lc3NhZ2U6ICdQbGVhc2Ugd2FpdCEgVXBkYXRpbmcgc29uZyBpbmZvLicKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KHZhbHVlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5pbl9zdWJtaXNzaW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dfYWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMuYWxlcnRfdmFyaWFudCA9ICdiZy1ibHVlLTUwMCc7CiAgICAgICAgICAgICAgICBfdGhpcy5hbGVydF9tZXNzYWdlID0gJ1BsZWFzZSB3YWl0ISBVcGRhdGluZyBzb25nIGluZm8uJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gc29uZ3NDb2xsZWN0aW9uLmRvYyhfdGhpcy5zb25nLmRvY0lEKS51cGRhdGUodmFsdWVzKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIF90aGlzLmluX3N1Ym1pc3Npb24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzLmFsZXJ0X3ZhcmlhbnQgPSAnYmctcmVkLTUwMCc7CiAgICAgICAgICAgICAgICBfdGhpcy5hbGVydF9tZXNzYWdlID0gJ1NvbWV0aGluZyB3ZW50IHdyb25nISBUcnkgYWdhaW4gbGF0ZXInOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVTb25nKF90aGlzLmluZGV4LCB2YWx1ZXMpOwoKICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVVuc2F2ZWRGbGFnKGZhbHNlKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5pbl9zdWJtaXNzaW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5hbGVydF92YXJpYW50ID0gJ2JnLWdyZWVuLTUwMCc7CiAgICAgICAgICAgICAgICBfdGhpcy5hbGVydF9tZXNzYWdlID0gJ1N1Y2Nlc3MhJzsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNCwgOV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlU29uZzogZnVuY3Rpb24gZGVsZXRlU29uZygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc3RvcmFnZVJlZiwgc29uZ1JlZjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RvcmFnZVJlZiA9IHN0b3JhZ2UucmVmKCk7CiAgICAgICAgICAgICAgICBzb25nUmVmID0gc3RvcmFnZVJlZi5jaGlsZCgic29uZ3MvIi5jb25jYXQoX3RoaXMyLnNvbmcub3JpZ2luYWxfbmFtZSkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHNvbmdSZWYuZGVsZXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBzb25nc0NvbGxlY3Rpb24uZG9jKF90aGlzMi5zb25nLmRvY0lEKS5kZWxldGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX3RoaXMyLnJlbW92ZVNvbmcoX3RoaXMyLmluZGV4KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/enes/Desktop/music-14-22-COMPLETED/src/components/CompositionItem.vue"],"names":[],"mappings":";;;AAoDA,SAAS,eAAT,EAA0B,OAA1B,QAAyC,qBAAzC;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,iBADO;AAEb,EAAA,KAAK,EAAE;AACL,IAAA,IAAI,EAAE;AACJ,MAAA,IAAI,EAAE,MADF;AAEJ,MAAA,QAAQ,EAAE;AAFN,KADD;AAKL,IAAA,UAAU,EAAE;AACV,MAAA,IAAI,EAAE,QADI;AAEV,MAAA,QAAQ,EAAE;AAFA,KALP;AASL,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,MADD;AAEL,MAAA,QAAQ,EAAE;AAFL,KATF;AAaL,IAAA,UAAU,EAAE;AACV,MAAA,IAAI,EAAE,QADI;AAEV,MAAA,QAAQ,EAAE;AAFA,KAbP;AAiBL,IAAA,iBAAiB,EAAE;AACjB,MAAA,IAAI,EAAE;AADW;AAjBd,GAFM;AAuBb,EAAA,IAvBa,kBAuBN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,KADL;AAEL,MAAA,MAAM,EAAE;AACN,QAAA,aAAa,EAAE,UADT;AAEN,QAAA,KAAK,EAAE;AAFD,OAFH;AAML,MAAA,aAAa,EAAE,KANV;AAOL,MAAA,UAAU,EAAE,KAPP;AAQL,MAAA,aAAa,EAAE,aARV;AASL,MAAA,aAAa,EAAE;AATV,KAAP;AAWD,GAnCY;AAoCb,EAAA,OAAO,EAAE;AACD,IAAA,IADC,gBACI,MADJ,EACY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACjB,gBAAA,KAAI,CAAC,aAAL,GAAqB,IAArB;AACA,gBAAA,KAAI,CAAC,UAAL,GAAkB,IAAlB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,aAArB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,kCAArB;AAJiB;AAAA;AAAA,uBAOT,eAAe,CAAC,GAAhB,CAAoB,KAAI,CAAC,IAAL,CAAU,KAA9B,EAAqC,MAArC,CAA4C,MAA5C,CAPS;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AASf,gBAAA,KAAI,CAAC,aAAL,GAAqB,KAArB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,YAArB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,uCAArB;AAXe;;AAAA;AAejB,gBAAA,KAAI,CAAC,UAAL,CAAgB,KAAI,CAAC,KAArB,EAA4B,MAA5B;;AACA,gBAAA,KAAI,CAAC,iBAAL,CAAuB,KAAvB;;AAEA,gBAAA,KAAI,CAAC,aAAL,GAAqB,KAArB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,cAArB;AACA,gBAAA,KAAI,CAAC,aAAL,GAAqB,UAArB;;AApBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBlB,KAtBM;AAuBD,IAAA,UAvBC,wBAuBY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,gBAAA,UADW,GACE,OAAO,CAAC,GAAR,EADF;AAEX,gBAAA,OAFW,GAED,UAAU,CAAC,KAAX,iBAA0B,MAAI,CAAC,IAAL,CAAU,aAApC,EAFC;AAAA;AAAA,uBAIX,OAAO,CAAC,MAAR,EAJW;;AAAA;AAAA;AAAA,uBAMX,eAAe,CAAC,GAAhB,CAAoB,MAAI,CAAC,IAAL,CAAU,KAA9B,EAAqC,MAArC,EANW;;AAAA;AAQjB,gBAAA,MAAI,CAAC,UAAL,CAAgB,MAAI,CAAC,KAArB;;AARiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASlB;AAhCM;AApCI,CAAf","sourcesContent":["<template>\n  <div class=\"border border-gray-200 p-3 mb-4 rounded\">\n    <div v-show=\"!showForm\">\n      <h4 class=\"inline-block text-2xl font-bold\">{{ song.modified_name }}</h4>\n      <button class=\"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right\"\n        @click.prevent=\"deleteSong\">\n        <i class=\"fa fa-times\"></i>\n      </button>\n      <button class=\"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right\"\n        @click.prevent=\"showForm = !showForm\">\n        <i class=\"fa fa-pencil-alt\"></i>\n      </button>\n    </div>\n    <div v-show=\"showForm\">\n      <div class=\"text-white text-center font-bold p-4 mb-4\" v-if=\"show_alert\"\n        :class=\"alert_variant\">\n        {{ alert_message }}\n      </div>\n      <vee-form :validation-schema=\"schema\" :initial-values=\"song\"\n        @submit=\"edit\">\n        <div class=\"mb-3\">\n          <label class=\"inline-block mb-2\">Song Title</label>\n          <vee-field type=\"text\" name=\"modified_name\"\n            class=\"block w-full py-1.5 px-3 text-gray-800 border border-gray-300\n              transition duration-500 focus:outline-none focus:border-black rounded\"\n            placeholder=\"Enter Song Title\"\n            @input=\"updateUnsavedFlag(true)\" />\n          <ErrorMessage class=\"text-red-600\" name=\"modified_name\" />\n        </div>\n        <div class=\"mb-3\">\n          <label class=\"inline-block mb-2\">Genre</label>\n          <vee-field type=\"text\" name=\"genre\"\n            class=\"block w-full py-1.5 px-3 text-gray-800 border border-gray-300\n              transition duration-500 focus:outline-none focus:border-black rounded\"\n            placeholder=\"Enter Genre\"\n            @input=\"updateUnsavedFlag(true)\" />\n          <ErrorMessage class=\"text-red-600\" name=\"genre\" />\n        </div>\n        <button type=\"submit\" class=\"py-1.5 px-3 rounded text-white bg-green-600\"\n          :disabled=\"in_submission\">\n          Submit\n        </button>\n        <button type=\"button\" class=\"py-1.5 px-3 rounded text-white bg-gray-600\"\n          :disabled=\"in_submission\" @click.prevent=\"showForm = false\">\n          Go Back\n        </button>\n      </vee-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { songsCollection, storage } from '@/includes/firebase';\n\nexport default {\n  name: 'CompositionItem',\n  props: {\n    song: {\n      type: Object,\n      required: true,\n    },\n    updateSong: {\n      type: Function,\n      required: true,\n    },\n    index: {\n      type: Number,\n      required: true,\n    },\n    removeSong: {\n      type: Function,\n      required: true,\n    },\n    updateUnsavedFlag: {\n      type: Function,\n    },\n  },\n  data() {\n    return {\n      showForm: false,\n      schema: {\n        modified_name: 'required',\n        genre: 'alpha_spaces',\n      },\n      in_submission: false,\n      show_alert: false,\n      alert_variant: 'bg-blue-500',\n      alert_message: 'Please wait! Updating song info.',\n    };\n  },\n  methods: {\n    async edit(values) {\n      this.in_submission = true;\n      this.show_alert = true;\n      this.alert_variant = 'bg-blue-500';\n      this.alert_message = 'Please wait! Updating song info.';\n\n      try {\n        await songsCollection.doc(this.song.docID).update(values);\n      } catch (error) {\n        this.in_submission = false;\n        this.alert_variant = 'bg-red-500';\n        this.alert_message = 'Something went wrong! Try again later';\n        return;\n      }\n\n      this.updateSong(this.index, values);\n      this.updateUnsavedFlag(false);\n\n      this.in_submission = false;\n      this.alert_variant = 'bg-green-500';\n      this.alert_message = 'Success!';\n    },\n    async deleteSong() {\n      const storageRef = storage.ref();\n      const songRef = storageRef.child(`songs/${this.song.original_name}`);\n\n      await songRef.delete();\n\n      await songsCollection.doc(this.song.docID).delete();\n\n      this.removeSong(this.index);\n    },\n  },\n};\n</script>\n"],"sourceRoot":""}]}